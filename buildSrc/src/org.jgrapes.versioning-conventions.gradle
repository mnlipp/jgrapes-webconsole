/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    // Required by axion-release
    id 'org.ajoberstar.grgit'
    // Git based versioning
    id 'pl.allegro.tech.build.axion-release'
}

def shortened = project.name.startsWith(project.group + ".") ?
    project.name.substring(project.group.length() + 1) : project.name
var tagName = shortened.replace('.', '-') + "-"
project.ext.tagName = tagName

scmVersion {
    versionIncrementer 'incrementMinor'
    tag {
        prefix = project.tagName
    }
}
project.version = scmVersion.version
ext.isSnapshot = version.endsWith('-SNAPSHOT')

task listSnapshots {
    doLast {
        if (isSnapshot) {
            println "Snapshot: " + project.name
        }
    }
}
